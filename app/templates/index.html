 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Terminal Color Theme Creator</title>
     <script src="https://cdn.tailwindcss.com"></script>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
     <script>
         tailwind.config = {
             theme: {
                 extend: {
                     fontFamily: {
                         'sans': ['Inter', 'system-ui', 'sans-serif'],
                         'mono': ['JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', 'monospace'],
                     },
                     colors: {
                         'surface': {
                             50: '#fafafa',
                             100: '#f5f5f5',
                             200: '#e5e5e5',
                             300: '#d4d4d4',
                             400: '#a3a3a3',
                             500: '#737373',
                             600: '#525252',
                             700: '#404040',
                             800: '#262626',
                             900: '#171717',
                             950: '#0a0a0a',
                         },
                         'accent': {
                             50: '#f0f9ff',
                             100: '#e0f2fe',
                             200: '#bae6fd',
                             300: '#7dd3fc',
                             400: '#38bdf8',
                             500: '#0ea5e9',
                             600: '#0284c7',
                             700: '#0369a1',
                             800: '#075985',
                             900: '#0c4a6e',
                             950: '#082f49',
                         }
                     },
                     animation: {
                         'fade-in': 'fadeIn 0.5s ease-out',
                         'slide-up': 'slideUp 0.3s ease-out',
                         'pulse-soft': 'pulseSoft 3s ease-in-out infinite',
                     }
                 }
             }
         }
     </script>
     <style>
         @keyframes fadeIn {
             from { opacity: 0; transform: translateY(10px); }
             to { opacity: 1; transform: translateY(0); }
         }
         @keyframes slideUp {
             from { opacity: 0; transform: translateY(20px); }
             to { opacity: 1; transform: translateY(0); }
         }
         @keyframes pulseSoft {
             0%, 100% { opacity: 0.8; }
             50% { opacity: 1; }
         }
         
         .glass-morphism {
             background: rgba(255, 255, 255, 0.05);
             backdrop-filter: blur(10px);
             border: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .color-swatch { 
             transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
             position: relative;
             overflow: hidden;
         }
         
         .color-swatch::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
             transition: left 0.5s;
         }
         
         .color-swatch:hover::before {
             left: 100%;
         }
         
         .modern-slider {
             -webkit-appearance: none;
             appearance: none;
             height: 4px;
             border-radius: 2px;
             background: linear-gradient(to right, 
                 rgba(239, 68, 68, 0.3) 0%, 
                 rgba(34, 197, 94, 0.3) 50%, 
                 rgba(59, 130, 246, 0.3) 100%);
             outline: none;
             transition: all 0.2s ease;
         }
         
         .modern-slider::-webkit-slider-thumb {
             -webkit-appearance: none;
             width: 16px;
             height: 16px;
             border-radius: 50%;
             background: white;
             cursor: pointer;
             box-shadow: 0 2px 8px rgba(0,0,0,0.3);
             transition: all 0.2s ease;
         }
         
         .modern-slider:hover::-webkit-slider-thumb {
             transform: scale(1.2);
             box-shadow: 0 4px 12px rgba(0,0,0,0.4);
         }
         
         .drop-zone {
             transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
             position: relative;
             overflow: hidden;
         }
         
         .drop-zone.dragover { 
             border-color: #0ea5e9;
             background: linear-gradient(135deg, rgba(14, 165, 233, 0.1), rgba(59, 130, 246, 0.05));
             transform: scale(1.02);
         }
         
         .terminal-window { 
             font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
             letter-spacing: 0.02em;
         }
         
         .preset-card {
             transition: all 0.2s ease;
             cursor: pointer;
             position: relative;
         }
         
         .preset-card:hover {
             transform: translateY(-2px);
             box-shadow: 0 8px 25px rgba(0,0,0,0.3);
         }
         
         .minimal-button {
             transition: all 0.2s ease;
             position: relative;
             overflow: hidden;
         }
         
         .minimal-button::after {
             content: '';
             position: absolute;
             top: 50%;
             left: 50%;
             width: 0;
             height: 0;
             border-radius: 50%;
             background: rgba(255, 255, 255, 0.3);
             transform: translate(-50%, -50%);
             transition: width 0.6s, height 0.6s;
         }
         
         .minimal-button:active::after {
             width: 300px;
             height: 300px;
         }
     </style>
 </head>
 <body class="bg-surface-950 text-surface-100 min-h-screen antialiased">
     <!-- Modern Header -->
     <header class="glass-morphism border-b border-surface-800/50 px-8 py-6 animate-fade-in">
         <div class="max-w-7xl mx-auto">
             <div class="flex items-center justify-between">
                 <div class="flex items-center space-x-4">
                     <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-accent-500 to-accent-600 flex items-center justify-center shadow-lg">
                         <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                         </svg>
                     </div>
                     <div>
                         <h1 class="text-2xl font-semibold text-surface-100 tracking-tight">Terminal Color Theme Creator</h1>
                         <p class="text-surface-400 text-sm mt-0.5">Craft beautiful terminal color schemes with precision</p>
                     </div>
                 </div>
                 <div class="flex items-center gap-3">
                     <div class="relative">
                         <input type="text" id="theme-name" value="Untitled Theme" placeholder="Enter theme name..."
                             class="bg-surface-800/50 border border-surface-700/50 rounded-lg px-4 py-2.5 text-sm font-medium text-surface-100 placeholder-surface-500 focus:outline-none focus:border-accent-500 focus:ring-2 focus:ring-accent-500/20 transition-all w-48">
                         <div class="absolute inset-0 rounded-lg bg-gradient-to-r from-accent-500/10 to-accent-600/10 opacity-0 focus-within:opacity-100 transition-opacity pointer-events-none"></div>
                     </div>
                     <button onclick="showExportModal()" 
                         class="minimal-button bg-accent-600 hover:bg-accent-500 text-white px-5 py-2.5 rounded-lg font-medium text-sm shadow-lg shadow-accent-600/25 hover:shadow-accent-600/40 transition-all flex items-center gap-2">
                         <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                         </svg>
                         Export
                     </button>
                 </div>
             </div>
         </div>
     </header>
 
     <!-- Modern Main Content -->
     <main class="max-w-7xl mx-auto px-8 py-8">
         <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
             <!-- Left Column: Image Upload & Presets -->
             <div class="lg:col-span-3 space-y-8">
                 <!-- Modern Image Upload -->
                 <section class="glass-morphism rounded-2xl p-6 animate-slide-up border border-surface-800/50">
                     <div class="flex items-center justify-between mb-4">
                         <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Color Extraction</h2>
                         <div class="w-2 h-2 rounded-full bg-accent-500 animate-pulse-soft"></div>
                     </div>
                     <div id="drop-zone" class="drop-zone border-2 border-dashed border-surface-700/50 rounded-xl p-8 text-center cursor-pointer hover:border-accent-500/50 transition-all group">
                         <div id="drop-content" class="space-y-4">
                             <div class="w-16 h-16 mx-auto rounded-full bg-gradient-to-br from-accent-500/20 to-accent-600/20 flex items-center justify-center group-hover:from-accent-500/30 group-hover:to-accent-600/30 transition-all">
                                 <svg class="w-8 h-8 text-accent-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                 </svg>
                             </div>
                             <div>
                                 <p class="text-sm font-medium text-surface-200 mb-1">Drop your image here</p>
                                 <p class="text-xs text-surface-500">or click to browse (PNG, JPG, WebP)</p>
                             </div>
                         </div>
                         <img id="preview-image" class="hidden max-h-32 mx-auto rounded-xl shadow-lg mt-4 animate-fade-in" alt="Preview">
                     </div>
                     <input type="file" id="file-input" accept="image/*" class="hidden">
                     <button id="extract-btn" disabled 
                         class="minimal-button w-full mt-6 bg-surface-800/50 hover:bg-surface-700/50 disabled:opacity-40 disabled:cursor-not-allowed text-surface-200 font-medium text-sm px-4 py-3 rounded-xl transition-all border border-surface-700/50 disabled:border-surface-800/50">
                         <span class="flex items-center justify-center gap-2">
                             <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                             </svg>
                             Extract Palette
                         </span>
                     </button>
                 </section>
 
                 <!-- Modern Theme Presets -->
                 <section class="glass-morphism rounded-2xl p-6 animate-slide-up border border-surface-800/50" style="animation-delay: 0.1s">
                     <div class="flex items-center justify-between mb-4">
                         <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Preset Themes</h2>
                         <svg class="w-4 h-4 text-surface-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                         </svg>
                     </div>
                     <div id="presets-container" class="space-y-3"></div>
                 </section>
             </div>
 
             <!-- Center Column: Modern Color Picker -->
             <div class="lg:col-span-5">
                 <section class="glass-morphism rounded-2xl p-6 animate-slide-up border border-surface-800/50" style="animation-delay: 0.2s">
                     <div class="flex items-center justify-between mb-4">
                         <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Color Controls</h2>
                         <div class="flex items-center gap-2">
                             <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse-soft"></div>
                             <span class="text-xs text-surface-500">Live Preview</span>
                         </div>
                     </div>
                     <div id="color-picker" class="space-y-4 max-h-[calc(100vh-240px)] overflow-y-auto pr-3 scrollbar-thin scrollbar-thumb-surface-700/50 scrollbar-track-surface-800/20"></div>
                 </section>
             </div>
 
             <!-- Right Column: Modern Terminal Preview -->
             <div class="lg:col-span-4">
                 <section class="glass-morphism rounded-2xl overflow-hidden border border-surface-800/50 animate-slide-up" style="animation-delay: 0.3s">
                     <div class="flex items-center justify-between p-6 pb-4 border-b border-surface-800/30">
                         <div class="flex items-center gap-3">
                             <div class="flex gap-1.5">
                                 <div class="w-3 h-3 rounded-full bg-red-500/80 hover:bg-red-500 transition-colors cursor-pointer"></div>
                                 <div class="w-3 h-3 rounded-full bg-yellow-500/80 hover:bg-yellow-500 transition-colors cursor-pointer"></div>
                                 <div class="w-3 h-3 rounded-full bg-green-500/80 hover:bg-green-500 transition-colors cursor-pointer"></div>
                             </div>
                             <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Terminal Preview</h2>
                         </div>
                         <div class="flex items-center gap-2">
                             <div class="w-2 h-2 rounded-full bg-accent-400 animate-pulse-soft"></div>
                             <span class="text-xs text-surface-500">Real-time</span>
                         </div>
                     </div>
                     <div class="p-6">
                         <div id="terminal-preview" class="terminal-window bg-surface-900 rounded-lg p-4 shadow-inner"></div>
                     </div>
                 </section>
             </div>
         </div>
     </main>
 
     <!-- Export Modal -->
     <div id="export-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
         <div class="bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col">
             <div class="flex items-center justify-between mb-4 flex-shrink-0">
                 <h3 class="text-lg font-semibold">Export Theme</h3>
                 <button onclick="hideExportModal()" class="text-gray-400 hover:text-white">
                     <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                     </svg>
                 </button>
             </div>
             <div class="overflow-y-auto flex-1 pr-2" style="scrollbar-width: thin;">
                 <div class="space-y-2 mb-6">
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="shell" checked class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Shell Script</div>
                         <div class="text-xs text-gray-400">Easy setup for most terminals</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="json" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">JSON</div>
                         <div class="text-xs text-gray-400">Save theme for later use</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="xresources" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Xresources</div>
                         <div class="text-xs text-gray-400">For Linux X11 terminals</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="iterm2" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">iTerm2</div>
                         <div class="text-xs text-gray-400">For macOS iTerm2</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="winterm" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Windows Terminal</div>
                         <div class="text-xs text-gray-400">For Windows Terminal settings</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="wezterm" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">WezTerm</div>
                         <div class="text-xs text-gray-400">For WezTerm terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="ansi" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">ANSI Codes</div>
                         <div class="text-xs text-gray-400">Raw color export variables</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="alacritty" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Alacritty</div>
                         <div class="text-xs text-gray-400">For Alacritty terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="kitty" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Kitty</div>
                         <div class="text-xs text-gray-400">For Kitty terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="hyper" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Hyper</div>
                         <div class="text-xs text-gray-400">For Hyper terminal</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="ghostty" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Ghostty</div>
                         <div class="text-xs text-gray-400">For Ghostty terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="terminal" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Mac Terminal.app</div>
                         <div class="text-xs text-gray-400">For macOS Terminal</div>
                     </div>
                 </label>
             </div>
            <div class="mb-6 p-3 bg-gray-700 rounded">
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="auto-install-wezterm" class="text-blue-500 rounded">
                    <div>
                        <div class="font-medium text-sm">Auto-install to WezTerm config</div>
                        <div class="text-xs text-gray-400">Directly add theme to .wezterm.lua file (WezTerm only)</div>
                    </div>
                </label>
            </div>
            <div id="wezterm-export-options" class="mb-6 p-3 bg-gray-700 rounded hidden">
                <div class="font-medium text-sm mb-2">WezTerm Export Mode:</div>
                <div class="space-y-2">
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="radio" name="wezterm-mode" value="complete" checked class="text-blue-500">
                        <div>
                            <div class="text-sm">Complete config with color picker</div>
                            <div class="text-xs text-gray-400">Full working setup - recommended for new users</div>
                        </div>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="radio" name="wezterm-mode" value="theme-only" class="text-blue-500">
                        <div>
                            <div class="text-sm">Theme data only</div>
                            <div class="text-xs text-gray-400">For manual integration into existing config</div>
                        </div>
                    </label>
                </div>
                </div>
             </div>
             <div class="flex gap-3 flex-shrink-0 mt-6">
                 <button onclick="hideExportModal()" class="flex-1 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded font-medium transition">
                     Cancel
                 </button>
                 <button onclick="exportTheme()" class="flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-medium transition">
                     Download
                 </button>
             </div>
         </div>
     </div>
 
     <script src="/static/js/colorPicker.js"></script>
     <script src="/static/js/preview.js"></script>
     <script src="/static/js/export.js"></script>
     <script src="/static/js/app.js"></script>
 </body>
 </html>

 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Terminal_Color_Tool</title>
     <script src="https://cdn.tailwindcss.com"></script>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
     <script>
         tailwind.config = {
             theme: {
                 extend: {
                     fontFamily: {
                         'sans': ['Inter', 'system-ui', 'sans-serif'],
                         'mono': ['JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', 'monospace'],
                     },
                     colors: {
                         'surface': {
                             50: '#fafafa',
                             100: '#f5f5f5',
                             200: '#e5e5e5',
                             300: '#d4d4d4',
                             400: '#a3a3a3',
                             500: '#737373',
                             600: '#525252',
                             700: '#404040',
                             800: '#262626',
                             900: '#171717',
                             950: '#0a0a0a',
                         },
                         'accent': {
                             50: '#f0f9ff',
                             100: '#e0f2fe',
                             200: '#bae6fd',
                             300: '#7dd3fc',
                             400: '#38bdf8',
                             500: '#0ea5e9',
                             600: '#0284c7',
                             700: '#0369a1',
                             800: '#075985',
                             900: '#0c4a6e',
                             950: '#082f49',
                         }
                     },
                     animation: {
                         'fade-in': 'fadeIn 0.5s ease-out',
                         'slide-up': 'slideUp 0.3s ease-out',
                         'pulse-soft': 'pulseSoft 3s ease-in-out infinite',
                     }
                 }
             }
         }
     </script>
     <style>
         /* GPU-accelerated animations */
         @keyframes fadeIn {
             from { opacity: 0; transform: translate3d(0, 10px, 0); }
             to { opacity: 1; transform: translate3d(0, 0, 0); }
         }
         @keyframes slideUp {
             from { opacity: 0; transform: translate3d(0, 20px, 0); }
             to { opacity: 1; transform: translate3d(0, 0, 0); }
         }
         @keyframes pulseSoft {
             0%, 100% { opacity: 0.6; }
             50% { opacity: 1; }
         }
         
         /* Optimized glass effect - reduced blur for performance */
         .glass-morphism {
             background: rgba(23, 23, 23, 0.85);
             backdrop-filter: blur(8px);
             -webkit-backdrop-filter: blur(8px);
         }
         
         /* Optimized color swatch - removed expensive ::before pseudo-element */
         .color-swatch { 
             transition: transform 0.2s ease, box-shadow 0.2s ease;
             will-change: transform;
         }
         
         .color-swatch:hover {
             transform: scale(1.05);
         }
         
         /* Optimized slider - simpler background */
         .modern-slider {
             -webkit-appearance: none;
             appearance: none;
             height: 4px;
             border-radius: 2px;
             background: rgba(64, 64, 64, 0.8);
             outline: none;
         }
         
         .modern-slider::-webkit-slider-thumb {
             -webkit-appearance: none;
             width: 14px;
             height: 14px;
             border-radius: 50%;
             background: white;
             cursor: pointer;
             box-shadow: 0 1px 4px rgba(0,0,0,0.3);
             transition: transform 0.15s ease;
             will-change: transform;
         }
         
         .modern-slider:hover::-webkit-slider-thumb {
             transform: scale(1.15);
         }
         
         .modern-slider::-moz-range-thumb {
             width: 14px;
             height: 14px;
             border-radius: 50%;
             background: white;
             cursor: pointer;
             border: none;
         }
         
         /* Optimized drop zone */
         .drop-zone {
             transition: border-color 0.2s ease, background-color 0.2s ease;
         }
         
         .drop-zone.dragover { 
             border-color: #0ea5e9;
             background-color: rgba(14, 165, 233, 0.08);
         }
         
         .terminal-window { 
             font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
         }
         
         /* Optimized preset card */
         .preset-card {
             transition: background-color 0.15s ease, border-color 0.15s ease;
             cursor: pointer;
         }
         
         .preset-card:hover {
             background-color: rgba(64, 64, 64, 0.5);
         }
         
         /* Simplified button */
         .minimal-button {
             transition: background-color 0.15s ease, transform 0.1s ease;
         }
         
         .minimal-button:hover {
             transform: translateY(-1px);
         }
         
         .minimal-button:active {
             transform: translateY(0);
         }
         
         /* Reduce animation overhead */
         .animate-slide-up {
             animation: slideUp 0.4s ease-out forwards;
         }
         
         .animate-fade-in {
             animation: fadeIn 0.3s ease-out forwards;
         }
         
         .animate-pulse-soft {
             animation: pulseSoft 2s ease-in-out infinite;
         }
     </style>
 </head>
 <body class="bg-surface-950 text-surface-100 min-h-screen antialiased">
     <!-- Modern Header -->
     <header class="glass-morphism border-b border-surface-800/50 px-8 py-6 animate-fade-in">
         <div class="max-w-7xl mx-auto">
             <div class="flex items-center justify-between">
                 <div class="flex items-center space-x-4">
                     <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-accent-500 to-accent-600 flex items-center justify-center shadow-lg">
                         <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                         </svg>
                     </div>
                     <div>
                         <h1 class="text-2xl font-semibold text-surface-100 tracking-tight">Terminal Color Theme Creator</h1>
                         <p class="text-surface-400 text-sm mt-0.5">Craft beautiful terminal color schemes with precision</p>
                     </div>
                 </div>
                 <div class="flex items-center gap-3">
                     <div class="relative">
                         <input type="text" id="theme-name" value="Untitled Theme" placeholder="Enter theme name..."
                             class="bg-surface-800/50 border border-surface-700/50 rounded-lg px-4 py-2.5 text-sm font-medium text-surface-100 placeholder-surface-500 focus:outline-none focus:border-accent-500 focus:ring-2 focus:ring-accent-500/20 transition-all w-48">
                         <div class="absolute inset-0 rounded-lg bg-gradient-to-r from-accent-500/10 to-accent-600/10 opacity-0 focus-within:opacity-100 transition-opacity pointer-events-none"></div>
                     </div>
                     <button onclick="showExportModal()" 
                         class="minimal-button bg-accent-600 hover:bg-accent-500 text-white px-5 py-2.5 rounded-lg font-medium text-sm shadow-lg shadow-accent-600/25 hover:shadow-accent-600/40 transition-all flex items-center gap-2">
                         <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                         </svg>
                         Export
                     </button>
                 </div>
             </div>
         </div>
     </header>
 
     <!-- Modern Main Content -->
     <main class="max-w-7xl mx-auto px-8 py-8 h-[calc(100vh-120px)]">
         <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 h-full">
             <!-- Left Column: Image Upload & Presets -->
             <div class="lg:col-span-3 flex flex-col gap-6 h-full min-h-0">
                 <!-- Modern Image Upload -->
                 <section class="glass-morphism rounded-2xl p-5 animate-slide-up border border-surface-800/50 flex-shrink-0">
                     <div class="flex items-center justify-between mb-3">
                         <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Color Extraction</h2>
                         <div class="w-2 h-2 rounded-full bg-accent-500 animate-pulse-soft"></div>
                     </div>
                     <div id="drop-zone" class="drop-zone border-2 border-dashed border-surface-700/50 rounded-xl p-4 text-center cursor-pointer hover:border-accent-500/50 transition-all group">
                         <div id="drop-content" class="flex items-center gap-3">
                             <div class="w-10 h-10 rounded-full bg-gradient-to-br from-accent-500/20 to-accent-600/20 flex items-center justify-center group-hover:from-accent-500/30 group-hover:to-accent-600/30 transition-all flex-shrink-0">
                                 <svg class="w-5 h-5 text-accent-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                 </svg>
                             </div>
                             <div class="text-left">
                                 <p class="text-sm font-medium text-surface-200">Drop image here</p>
                                 <p class="text-xs text-surface-500">PNG, JPG, WebP</p>
                             </div>
                         </div>
                         <img id="preview-image" class="hidden max-h-24 mx-auto rounded-lg shadow-lg mt-3 animate-fade-in" alt="Preview">
                     </div>
                     <input type="file" id="file-input" accept="image/*" class="hidden">
                     <button id="extract-btn" disabled 
                         class="minimal-button w-full mt-4 bg-surface-800/50 hover:bg-surface-700/50 disabled:opacity-40 disabled:cursor-not-allowed text-surface-200 font-medium text-sm px-4 py-2.5 rounded-lg transition-all border border-surface-700/50 disabled:border-surface-800/50">
                         <span class="flex items-center justify-center gap-2">
                             <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                             </svg>
                             Extract Palette
                         </span>
                     </button>
                     <button id="clear-image-btn" disabled
                         class="minimal-button w-full mt-2 bg-red-900/20 hover:bg-red-900/30 disabled:opacity-40 disabled:cursor-not-allowed text-red-400 font-medium text-sm px-4 py-2 rounded-lg transition-all border border-surface-700/50 disabled:border-surface-800/50">
                         <span class="flex items-center justify-center gap-2">
                             <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                             </svg>
                             Clear Image
                         </span>
                     </button>
                 </section>
 
                 <!-- Modern Theme Presets -->
                 <section class="glass-morphism rounded-2xl p-5 animate-slide-up border border-surface-800/50 flex-1 min-h-0 flex flex-col" style="animation-delay: 0.1s">
                     <div class="flex items-center justify-between mb-3 flex-shrink-0">
                         <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Preset Themes</h2>
                         <svg class="w-4 h-4 text-surface-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                         </svg>
                     </div>
                     <div id="presets-container" class="space-y-2 overflow-y-auto flex-1 pr-1 scrollbar-thin"></div>
                 </section>
             </div>
 
             <!-- Center Column: Modern Color Picker -->
             <div class="lg:col-span-5 h-full min-h-0">
                 <section class="glass-morphism rounded-2xl p-5 animate-slide-up border border-surface-800/50 h-full flex flex-col" style="animation-delay: 0.2s">
                     <div class="flex items-center justify-between mb-3 flex-shrink-0">
                         <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Color Controls</h2>
                         <div class="flex items-center gap-2">
                             <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse-soft"></div>
                             <span class="text-xs text-surface-500">Live Preview</span>
                         </div>
                     </div>
                     <div id="color-picker" class="space-y-3 overflow-y-auto flex-1 pr-2 scrollbar-thin"></div>
                 </section>
             </div>
 
             <!-- Right Column: Modern Terminal Preview -->
             <div class="lg:col-span-4 h-full min-h-0">
                 <section class="glass-morphism rounded-2xl overflow-hidden border border-surface-800/50 animate-slide-up h-full flex flex-col" style="animation-delay: 0.3s">
                     <div class="flex items-center justify-between px-5 py-4 border-b border-surface-800/30 flex-shrink-0">
                         <div class="flex items-center gap-3">
                             <div class="flex gap-1.5">
                                 <div class="w-2.5 h-2.5 rounded-full bg-red-500/80 hover:bg-red-500 transition-colors cursor-pointer"></div>
                                 <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/80 hover:bg-yellow-500 transition-colors cursor-pointer"></div>
                                 <div class="w-2.5 h-2.5 rounded-full bg-green-500/80 hover:bg-green-500 transition-colors cursor-pointer"></div>
                             </div>
                             <h2 class="text-sm font-semibold text-surface-200 tracking-wide">Terminal Preview</h2>
                         </div>
                         <div class="flex items-center gap-2">
                             <div class="w-2 h-2 rounded-full bg-accent-400 animate-pulse-soft"></div>
                             <span class="text-xs text-surface-500">Real-time</span>
                         </div>
                     </div>
                     <div class="p-5 flex-1 overflow-y-auto">
                         <div id="terminal-preview" class="terminal-window bg-surface-900 rounded-lg p-4 shadow-inner"></div>
                     </div>
                 </section>
             </div>
         </div>
     </main>
 
     <!-- Export Modal -->
     <div id="export-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
         <div class="bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col">
             <div class="flex items-center justify-between mb-4 flex-shrink-0">
                 <h3 class="text-lg font-semibold">Export Theme</h3>
                 <button onclick="hideExportModal()" class="text-gray-400 hover:text-white">
                     <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                     </svg>
                 </button>
             </div>
             <div class="overflow-y-auto flex-1 pr-2" style="scrollbar-width: thin;">
                 <div class="space-y-2 mb-6">
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="shell" checked class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Shell Script</div>
                         <div class="text-xs text-gray-400">Easy setup for most terminals</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="json" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">JSON</div>
                         <div class="text-xs text-gray-400">Save theme for later use</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="xresources" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Xresources</div>
                         <div class="text-xs text-gray-400">For Linux X11 terminals</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="iterm2" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">iTerm2</div>
                         <div class="text-xs text-gray-400">For macOS iTerm2</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="winterm" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Windows Terminal</div>
                         <div class="text-xs text-gray-400">For Windows Terminal settings</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="wezterm" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">WezTerm</div>
                         <div class="text-xs text-gray-400">For WezTerm terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="ansi" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">ANSI Codes</div>
                         <div class="text-xs text-gray-400">Raw color export variables</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="alacritty" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Alacritty</div>
                         <div class="text-xs text-gray-400">For Alacritty terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="kitty" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Kitty</div>
                         <div class="text-xs text-gray-400">For Kitty terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="hyper" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Hyper</div>
                         <div class="text-xs text-gray-400">For Hyper terminal</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="ghostty" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Ghostty</div>
                         <div class="text-xs text-gray-400">For Ghostty terminal emulator</div>
                     </div>
                 </label>
                 <label class="flex items-center gap-3 p-3 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition">
                     <input type="radio" name="export-format" value="terminal" class="text-blue-500">
                     <div>
                         <div class="font-medium text-sm">Mac Terminal.app</div>
                         <div class="text-xs text-gray-400">For macOS Terminal</div>
                     </div>
                 </label>
             </div>
            <div class="mb-6 p-3 bg-gray-700 rounded">
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="auto-install-wezterm" class="text-blue-500 rounded">
                    <div>
                        <div class="font-medium text-sm">Auto-install to WezTerm config</div>
                        <div class="text-xs text-gray-400">Directly add theme to .wezterm.lua file (WezTerm only)</div>
                    </div>
                </label>
            </div>
            <div id="wezterm-export-options" class="mb-6 p-3 bg-gray-700 rounded hidden">
                <div class="font-medium text-sm mb-2">WezTerm Export Mode:</div>
                <div class="space-y-2">
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="radio" name="wezterm-mode" value="complete" checked class="text-blue-500">
                        <div>
                            <div class="text-sm">Complete config with color picker</div>
                            <div class="text-xs text-gray-400">Full working setup - recommended for new users</div>
                        </div>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="radio" name="wezterm-mode" value="theme-only" class="text-blue-500">
                        <div>
                            <div class="text-sm">Theme data only</div>
                            <div class="text-xs text-gray-400">For manual integration into existing config</div>
                        </div>
                    </label>
                </div>
                </div>
             </div>
             <div class="flex gap-3 flex-shrink-0 mt-6">
                 <button onclick="hideExportModal()" class="flex-1 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded font-medium transition">
                     Cancel
                 </button>
                 <button onclick="exportTheme()" class="flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-medium transition">
                     Download
                 </button>
             </div>
         </div>
     </div>
 
     <script src="/static/js/colorPicker.js"></script>
     <script src="/static/js/preview.js"></script>
     <script src="/static/js/export.js"></script>
     <script src="/static/js/app.js"></script>
 </body>
 </html>
